<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediMate智能聊天夥伴</title>
    <link rel="icon" href="image/Logo.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <style>
        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: white;
        }

        header {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: absolute;
            vertical-align: middle;
            padding: 10px;
            width: 100%;
        }

        .logo {
            height: 130px;
            vertical-align: middle;
            width: auto;
        }

        .brand-name {
            vertical-align: middle;
            font-size: 4.5vw;
            font-weight: bold;
            color: #00d9ff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-left: 10px;
        }
        .actions {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: absolute;
            width: 80%;
            bottom: 3%;
            left: 10%;
            border-radius: 20px;
            background-color: rgba(81, 80, 80, 0.7);
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, opacity 0.3s;
        }

        .actions.show, #dealWith.show {
            display: flex;
            opacity: 1;
            transform: scale(1);
        }

        .actions.hide, #dealWith.hide {
            opacity: 0;
            transform: scale(0.8);
        }

        #voiceButton {
            position: absolute;
            bottom: 7%;
            left: 43%;
            width: 130px;
            height: 130px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            font-family: monospace;
            opacity: 0.8;
            border-radius: 50%;
            background-color: rgba(0, 217, 255, 0.6);
            cursor: pointer;
            border: none;
            transition: background-color 0.3s, opacity 0.3s, box-shadow 0.3s, transform 0.3s;
        }

        #voiceInput, #voiceOnput, #dealWith {
            font-size: 4vw;
            width: 80%;
            padding: 20px;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-radius: 20px;
            z-index: 100;
            margin-top: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            line-height: 1.5em;
            letter-spacing: 0.1em;
        }
        #dealWith {
            display: none;
            width: 50%;
            position: absolute;
            background-color: rgba(85, 86, 88, 0.718);
            left: 25%;
            bottom: 10%;
        }

        #voiceOnput {
            position: absolute;
            background-color: rgba(99, 98, 98, 0.6);
            left: 10%;
            top: 12%
        }

        .stop-button {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 3.5vw;
            color: white;
            background-color: #ff4d4d;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        }

        .stop-button:active {
            background-color: #ff1a1a;
            box-shadow: 0 4px 15px rgba(255, 26, 26, 0.3);
        }

        @media (max-width: 768px) {
            .logo {
                height: 130px;
            }

            #voiceButton {
                width: 100px;
                height: 100px;
                font-size: 20px;
            }

            #voiceInput {
                width: 90%;
            }

            .stop-button {
                font-size: 16px;
                padding: 8px 16px;
            }
        }

        @media (max-width: 320px) {
            .logo {
                height: 50px;
            }

            #voiceButton {
                width: 80px;
                height: 80px;
            }

            #voiceInput {
                width: 85%;
            }

            .stop-button {
                padding: 6px 12px;
            }
        }

        @keyframes scaleUp {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        @keyframes scaleDown {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(0.8);
            }

            100% {
                transform: scale(0.5);
            }
        }

        .scale-up {
            animation: scaleUp 0.3s ease-in-out;
        }

        .scale-down {
            animation: scaleDown 0.3s ease-in-out;
        }
    </style>
    <link rel="stylesheet" media="screen" href="style.css">
</head>

<body>
    <header>
        <img src="image/Logo.png" alt="MediMate Logo" class="logo">
        <span class="brand-name">MediMate智能聊天夥伴</span>
    </header>
    <div id="voiceOnput">
        訊息回應處
    </div>
    <button id="voiceButton">
        <img src="image/microphone.png" alt="Microphone" style="width: 60%; height: auto;">
    </button>
    <div id="dealWith">
        <div class="spinner-border text-success" role="status">
        </div>
          處理中，請稍後...
    </div>
    <div class="actions" id="actions">
        <div id="voiceInput">請開始說話</div>
        <button class="stop-button" id="stopButton">結束錄音</button>
    </div>
</body>

</html>
<script>
    const voiceButton = document.getElementById('voiceButton');
    const actions = document.getElementById('actions');
    const stopButton = document.getElementById('stopButton');
    const dealWith = document.getElementById('dealWith');

    voiceButton.addEventListener('click', () => {
        voiceButton.classList.add('scale-up');
        setTimeout(() => {
            voiceButton.style.display = 'none';
            actions.classList.remove('hide');
            actions.classList.add('show');
            actions.classList.remove('scale-down');
            actions.classList.add('scale-up');
        }, 300);
    });

    stopButton.addEventListener('click', () => {
        actions.classList.remove('scale-up');
        actions.classList.add('scale-down');
        setTimeout(() => {
            actions.classList.remove('show');
            actions.classList.add('hide');
            dealWith.style.display = 'block';
            actions.classList.add('show');
        }, 300);
    });

    voiceButton.addEventListener('animationend', () => {
        voiceButton.classList.remove('scale-up');
    });

    stopButton.addEventListener('animationend', () => {
        stopButton.classList.remove('scale-down');
    });

    actions.addEventListener('animationend', () => {
        actions.classList.remove('scale-up');
    });
</script>
<script>
    const speechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (speechRecognition) {
        const recognition = new speechRecognition();
        recognition.lang = 'zh-TW';
        recognition.interimResults = false;

        const microphoneButton = document.getElementById('voiceButton');
        const outputDiv = document.getElementById('voiceInput');

        microphoneButton.addEventListener('click', () => {
            try {
                recognition.start();
                outputDiv.textContent = '請開始說話...';
            } catch (error) {
                console.error('語音識別啟動失敗:', error);
            }
        });

        recognition.onresult = function (event) {
            const last = event.results.length - 1;
            const text = event.results[last][0].transcript;
            outputDiv.textContent = text;
        };

        recognition.onspeechend = function () {
            recognition.stop();
            outputDiv.textContent += ' (輸入結束)';
        };

        recognition.onerror = function (event) {
            outputDiv.textContent = '語音識別錯誤: ' + event.error;
        };
    } else {
        console.error('瀏覽器不支持語音識別');
    }
</script>

<div id="particles-js"></div>
<script src="particles.js-master/particles.js"></script>
<script src="particles.js-master/demo/js/app.js"></script>

<script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.130.0';
    import { OrbitControls } from 'https://cdn.skypack.dev/three@0.130.0/examples/jsm/controls/OrbitControls.js';
    import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.130.0/examples/jsm/loaders/GLTFLoader.js';

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000000);
    document.body.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = false; // 啟用阻尼效果
    controls.dampingFactor = 0.25; // 阻尼因子
    controls.screenSpacePanning = false; // 禁用空間平移
    controls.minDistance = 5; // 最小縮放距離
    controls.maxDistance = 5; // 最大縮放距離
    controls.maxPolarAngle = Math.PI / 2; // 最大垂直旋轉角度
    controls.minPolarAngle = Math.PI / 2; // 最小垂直旋轉角度
    controls.maxAzimuthAngle = 0; // 最大水平旋轉角度
    controls.minAzimuthAngle = 0; // 最小水平旋轉角度
    controls.update();

    camera.position.z = 5;

    const loader = new GLTFLoader();
    loader.load('project.vrm', function(gltf) {
        const vrmModel = gltf.scene;
        vrmModel.rotation.y = Math.PI;
        vrmModel.scale.set(10, 10, 10);
        vrmModel.position.y = -8;
        vrmModel.rotation.x = Math.PI / 30;

        vrmModel.traverse((child) => {
            if (child.isMesh && child.name.includes('upperBody')) {
                scene.add(child);
            }
        });
        scene.add(vrmModel);

        const mixer = new THREE.AnimationMixer(vrmModel);

        // 檢查是否存在動畫並打印到控制台
        console.log(gltf.animations);

        if (gltf.animations && gltf.animations.length > 0) {
            const blinkAction = mixer.clipAction(gltf.animations[0]); // 使用第一個動畫作為示例
            blinkAction.play();
        } else {
            console.warn('No animations found in the GLTF file.');
        }

        function animate() {
            requestAnimationFrame(animate);
            mixer.update(0.01); // 更新動畫
            renderer.render(scene, camera);
            controls.update();
        }

        animate();
    }, undefined, function(error) {
        console.error('Failed to load VRM model:', error);
    });
</script>

<script>
    function triggerInput() {
        var inputField = document.getElementById('textInput');
        inputField.focus();
    }
</script>

</body>

</html>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>